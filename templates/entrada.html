{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Entrada de Roupas</h2>
    <form method="POST" action="/entrada">
        <div class="row mb-3">
            <div class="col">
                <label for="tipo" class="form-label">Tipo de Roupa</label>
                <select class="form-select" id="tipo" name="tipo" required onchange="atualizarCampos()">
                    <option value="">Selecione</option>
                    <option value="Macacão Azul">Macacão Azul</option>
                    <option value="Bota Azul">Bota Azul</option>
                    <option value="Óculos">Óculos</option>
                    <option value="Panos">Panos</option>
                    <option value="Jaleco">Jaleco</option>
                    <option value="Camisa">Camisa</option>
                    <option value="Calça">Calça</option>
                </select>
            </div>
            <div class="col">
                <label for="tamanho" class="form-label">Tamanho</label>
                <select class="form-select" id="tamanho" name="tamanho" required>
                    <option value="">Selecione o tamanho</option>
                </select>
            </div>
            <div class="col">
                <label for="categoria" class="form-label">Categoria</label>
                <input type="text" class="form-control" id="categoria" name="categoria" readonly required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col">
                <label for="quantidade" class="form-label">Quantidade</label>
                <input type="number" class="form-control" id="quantidade" name="quantidade" required min="1">
            </div>
            <div class="col">
                <label for="lote" class="form-label">Lote</label>
                <input type="text" class="form-control" id="lote" name="lote">
            </div>
            <div class="col">
                <label for="validade" class="form-label">Validade</label>
                <input type="date" class="form-control" id="validade" name="validade">
            </div>
        </div>

        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary">Registrar Entrada</button>
            <a href="/" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>

<script>
function atualizarCampos() {
    const tipo = document.getElementById('tipo').value;
    const categoriaInput = document.getElementById('categoria');
    const tamanhoSelect = document.getElementById('tamanho');

    const estereis = ['Macacão Azul', 'Bota Azul', 'Óculos', 'Panos'];
    const naoEstereis = ['Jaleco', 'Camisa', 'Calça'];

    if (estereis.includes(tipo)) {
        categoriaInput.value = 'Estéril';
    } else if (naoEstereis.includes(tipo)) {
        categoriaInput.value = 'Não Estéril';
    } else {
        categoriaInput.value = '';
    }

    // Define tamanhos possíveis por tipo
    const tamanhosPorTipo = {
        'Macacão Azul': ['PP', 'P', 'M', 'G', 'GG', 'G3', 'G4'],
        'Bota Azul': ['PP', 'P', 'M', 'G', 'GG', 'G3', 'G4'],
        'Jaleco': ['PP', 'P', 'M', 'G', 'GG', 'G3', 'G4'],
        'Camisa': ['PP', 'P', 'M', 'G', 'GG', 'G3', 'G4'],
        'Calça': ['PP', 'P', 'M', 'G', 'GG', 'G3', 'G4'],
        'Óculos': ['Padrão'],
        'Panos': ['Padrão']
    };

    // Limpa o campo tamanho
    tamanhoSelect.innerHTML = '<option value="">Selecione o tamanho</option>';

    // Preenche conforme tipo
    if (tipo in tamanhosPorTipo) {
        tamanhosPorTipo[tipo].forEach(tam => {
            const opt = document.createElement("option");
            opt.value = tam;
            opt.textContent = tam;
            tamanhoSelect.appendChild(opt);
        });
    }
}
</script>
{% endblock %}
