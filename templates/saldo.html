{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <h2 class="text-center text-primary mb-4">Saldo de Roupas</h2>
  <p class="text-center">Clique em um tipo de roupa para visualizar os detalhes.</p>

  <div class="d-flex flex-wrap justify-content-center mb-4">
    {% for tipo in roupas_por_tipo.keys() %}
      <button class="btn btn-outline-primary m-2" onclick="mostrarTabela('{{ tipo }}')">
        <i class="bi bi-eye"></i> {{ tipo }}
      </button>
    {% endfor %}
  </div>

  <div id="tabelasContainer">
    {% for tipo, roupas_do_tipo in roupas_por_tipo.items() %}
      <div id="tabela-{{ tipo }}" class="tabela-tipo mb-5" style="display: none;">
        <h4 class="text-center text-secondary mb-3">{{ tipo }}</h4>
        <div class="table-responsive">
          <table class="table table-striped table-bordered text-center">
            <thead class="table-dark">
              <tr>
                <th>Tamanho</th>
                <th>Lote</th>
                <th>Validade</th>
                <th>Qtd</th>
                <th>Data de Entrada</th>
              </tr>
            </thead>
            <tbody>
              {% for roupa in roupas_do_tipo %}
                <tr>
                  <td>{{ roupa.tamanho }}</td>
                  <td>{{ roupa.lote or '-' }}</td>
                  <td>{{ roupa.validade or '-' }}</td>
                  <td>{{ roupa.quantidade }}</td>
                  <td>{{ roupa.data_entrada or '-' }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="text-center">
    <a href="/" class="btn btn-outline-secondary mt-3">
      <i class="bi bi-arrow-left"></i> Voltar ao In√≠cio
    </a>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tabelas = document.querySelectorAll('.tabela-tipo');
    tabelas.forEach(tabela => tabela.style.display = 'none');
  });

  function mostrarTabela(tipo) {
    const tabelas = document.querySelectorAll('.tabela-tipo');
    tabelas.forEach(tabela => tabela.style.display = 'none');

    const tabelaSelecionada = document.getElementById('tabela-' + tipo);
    if (tabelaSelecionada) {
      tabelaSelecionada.style.display = 'block';
    }
  }
</script>
{% endblock %}
